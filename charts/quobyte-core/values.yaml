# Name of the nodepool in which the Quobyte services will be deployed.
# This must be a dedicated nodepool that is used to run Quobyte services
# exclusively and have sufficient resources to run all required services.
# The separate nodepool is required for performance isolation to avoid
# other workloads from impacting your storage.
# Minimum node pool size is 4 machines.
nodepoolname: default-pool

# external-dns allows you to use your Quobyte cluster from outside the Kubernetes
# cluster, e.g. from bare metal machines or VMs or across data centers.
# When enabled it will create one DNS CNAME record for each registry and one
# CNAME record for the cluster that contains all registry endpoints.
# The records are automatically updated when the IP of a service changes.
# For this to work you have to use host networking.
# See https://github.com/kubernetes-sigs/external-dns for more details.
externaldns:
  enabled: false
  # Do not edit
  name: external-dns
  # Do not edit
  image: registry.opensource.zalan.do/teapot/external-dns:latest
  # Set the provider you use for your deployment
  provider: google
  # The fully qualified domain name in which to create the records
  domainfilter: gce-test.quobyte.net
  # Default level is warn, set to debug if neccesary
  loglevel: warn
  # Subdomain (within your domainfilter) in which the records are created. MUST END WITH A .
  # If your domain is quobyte.evilcorp.tld your domain filter should be evilcorp.tld and
  # the annotation should be quobyte.evilcorp.tld. (don't forget the trailing . !)
  annotation: quobyte.gce-test.quobyte.net.

# Configuration for the Quobyte services, i.e. the Quobyte cluster providing storage.
quobyte:
  # Loadbalancer to make the Quobyte webconsole accessible.
  # If set to true an internal IP will be used, if set to false an external IP will be used
  # the exact semantics of internal/external depend on your k8s config or provider.
  lbinternal: false 
  
  # Configuration for the persistent disks used by the Quobyte services.
  # This is *not* the configuration for the CSI plugin and the storage classes
  # to consume the Quobyte storage!
  
  # Name depends on the cloud environment, e.g. pd-ssd for Google Kubernetes Engine
  flashStorage: pd-ssd
  # Storage provider depending to the cloud environment
  storageProvisioner: kubernetes.io/gce-pd
  
  # Minimum number of replicas per Quobyte services, minimum is 4.
  # Your nodepool must have at least 4 nodes.
  replicas: 4
  
  # Data disks attached to each Quobyte data services, minimum is one data disk,
  # maximum is 16. Please note that adding more data disks will increase capacity,
  # but not necessarily the performance of your Quobyte cluster.
  # The name MUST start with "data".
  # The mount point MUST start with "/var/lib/quobyte/devices/data..." and the last
  # part MUST match the disk name. E.g. if the name is "data5" the mountpoint
  # must be "/var/lib/quobyte/devices/data5".
  # The minimum capacity of a disk must be 100Gi, recommended size depends on the
  # cloud environment, e.g. 840Gi for Google Persistent SSDs.
  datadisks:
    - name: data0
      mountpoint: /var/lib/quobyte/devices/data0
      size: "840Gi"
    - name: data1
      mountpoint: /var/lib/quobyte/devices/data1
      size: "840Gi"
  
  # Metadata disks attached to each Quobyte metadata service, minimum is one
  # metadata disk. Similar to datadisks, names MUST start with "metadata".
  # Minimum capacity is 100Gi, recommended size depends on the cloud environment.
  # Please make sure to use SSDs or media with similar peformance characteristics.
  metadatadisks:
    - name: metadata0
      mountpoint: /var/lib/quobyte/devices/metadata0
      size: "100Gi"
      
  # Set enabled to start the Quobyte S3 service. Requires a properly
  # configured domain name.
  # As S3 is an HTTP-based protocol, it requires a correct DNS hostname setup. 
  # Generally the S3 service will be available under a specific hostname such as s3.example.com. 
  # Buckets can be addressed as a subdomain of the host e.g., <bucket name>.s3.example.com.
  #
  # HTTP requires a setup of both the S3 hostname and a wildcard hostname for subdomains in your DNS
  # infrastructure which points to the machine or machines running the S3 Proxy. 
  # So at a minimum, there are two CNAME records that point to a machine running the S3 proxy
  s3:
    enabled: false
    dnsname: s3.example.com
  
  # DO NOT EDIT OPTIONS BELOW THIS LINE
  webconsoleport: 8080
  image: quay.io/quobyte/quobyte-server:3 
  # Maximum number of open file descriptors per container,
  # must be set to 999,999 or more.
  maxopenfiles: "1048576"
  # Maximum number of processes, must be set to 16,000 or more.
  maxprocs: "16384"
